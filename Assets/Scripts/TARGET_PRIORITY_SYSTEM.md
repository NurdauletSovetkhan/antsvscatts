# Система приоритетов целей для врагов

## Приоритеты атаки (для обычных муравьёв):

1. **Баррикада** - если в радиусе 5 юнитов
2. **Игрок** - если жив
3. **Холодильник (База)** - главная цель

## Особые правила:

### Гоблины (Goblin)
- Атакуют **ТОЛЬКО фермы**
- Игнорируют всё остальное
- Ищут ближайшую ферму

### Все враги
- Переоценивают цель каждую секунду
- Если текущая цель уничтожена - ищут новую по приоритету
- Стреляющие враги атакуют на расстоянии (8-10м)

---

## Настройка в Unity

### 1. Настройте теги для объектов:

Перейдите в **Edit → Project Settings → Tags and Layers** и добавьте теги:

- `Base` - Холодильник (главная база)
- `Player` - Игрок (кот)
- `Barricade` - Баррикады (препятствия)
- `Farm` - Фермы
- `Turret` - Турели
- `Enemy` - Враги

### 2. Назначьте теги объектам:

#### Холодильник (Refrigerator):
- Tag: `Base`
- Компоненты: Health, Collider2D (Is Trigger = true)

#### Игрок (Player):
- Tag: `Player`
- Компоненты: Health, Collider2D (Is Trigger = true)

#### Баррикада (Barricade):
- Tag: `Barricade`
- Компоненты: Health, Collider2D (Is Trigger = true)
- Здоровье: ~50-100 HP

#### Ферма (Farm):
- Tag: `Farm`
- Компоненты: Health, Collider2D (Is Trigger = true)

#### Турели:
- Tag: `Turret`
- Компоненты: Health, Turret, Collider2D (Is Trigger = true)

---

## Как это работает:

### Пример 1: Обычный муравей
1. Спавнится → ищет цель
2. Видит игрока → идёт к игроку
3. Встречает баррикаду (в радиусе 5м) → **переключается на баррикаду**
4. Ломает баррикаду → возвращается к игроку
5. Игрок умирает → **все муравьи идут на холодильник**

### Пример 2: Гоблин
1. Спавнится → ищет ближайшую ферму
2. Игнорирует игрока, турели, баррикады
3. Бежит к ферме (самый быстрый враг!)
4. Атакует ферму → уничтожает урожай
5. Ферма уничтожена → ищет следующую ферму

### Пример 3: Стреляющий муравей
1. Спавнится → ищет цель
2. Подходит на дистанцию 8 метров
3. **Останавливается и стреляет**
4. Не идёт в ближний бой (если может стрелять)

---

## Стратегические моменты:

### Защита:
- **Баррикады** блокируют врагов - они переключаются на них
- **Игрок** - приоритетная цель (ты танк)
- **Фермы** уязвимы для гоблинов - ставь турели рядом

### Баланс волн:
- **Ранние волны**: Common муравьи → легко
- **Средние волны**: Soldier + Tank → нужны баррикады
- **Поздние волны**: Boss + Shooting → кайт и турели
- **Специальные волны**: Орды гоблинов → защита ферм!

---

## Параметры настройки:

В `EnemyAI.cs`:
```csharp
private float retargetInterval = 1f; // Переоценка цели (секунды)
float closestBarricadeDistance = 5f; // Радиус обнаружения баррикад
```

Измени эти значения для балансировки!
